# Логика проекта

[Назад](./Help.md)

## Содержание

1. [Клиент](#client)
2. [Центр](#center)
3. [Профессионал](#pro)

## Клиент <a id='client'></a>

### Новый пользователь

Путь

1. Зайти на сайт
2. Зарегестрироваться
3. Аутентифицироваться
4. Описать проблему
5. Выбрать центр
6. Подать заявку
7. Ожидать обратную связь
8. Получить обратную связь в виде текста или назначенной встречи

### Существующий пользователь

Путь

1. Зайти на сайт
2. Аутентифицироваться
3. Описать проблему
4. Выбрать центр
5. Подать заявку
6. Ожидать обратную связь
7. Получить обратную связь в виде текста или назначенной встреч

### Логика подачи заявок

Пользователь заполняет форму в которой будут такие поля:

1. Тайтл проблемы, до 25 символов, например: ```Депрессия, муж насильник, хочется поговорить```
2. Описание проблемы
3. Дата получения проблемы
4. Статус проблемы, насколько остра проблема клиента, что бы поставить её в приоритет. Статусы проблем: ```EXTRA HIGH, HIGH, MEDIUM, LOW, MINOR```
5. Статус решения проблемы: ```idle, processing, fulfilled, rejected```

Заявка попадает в выбранный пользователем центр

## Центр помощи <a id='center'></a>

### Краткая логика центра

1. Зайти на сайт
2. Аутентифицироваться
3. Просмотр заявок

    3.1 Просмотр клиентов

    3.2 Просмотр проблем, оценка приоритетности клиентской проблемы

    3.3 Выбор профессионала под клиента
4. Одобрить/Отклонить заявку клиента
5. *Проблема решена?* Поставить статус выполнено

### Логика

Центр это сущность которая назначает профессионала за клиентом и решает на сколько серьезная проблема и стоит за нее браться или нет.

При заходе в личный кабинет центр, просматривает список все пользователей которые подались. Центр оценивает приоритетность проблемы на сколько быстро ее нужно решать. Центр может отклонить проблему по какой то причине. Если этого не произошло центр закрепляет профессионала за клиентом. После решения проблемы, центр получает от профессионала что проблема решена и ставит статус что проблема решена.

## Профессионал <a id='pro'></a>

### Краткая логика

1. Получить клиента от центра
2. Ознакомиться с проблемой клиента
3. Написать письмо пользователю с решением или назначить встречу
4. *Проблема решена?* Отправить в центр запрос с законченным успешным статусом.

### Логика

Профессионал это сущность которая будет решать проблемы клиента, давать советы и тд.

Профессионал получает заявки от центра за которым он закреплен. Начинает свое ознакомление с проблемой и решает ее. Может отправить письмо клиенту или назначить встречу. Если проблема решена, отправляет завершенный статус в центр.

В эту таблицу попадает назначения профессионала

```sql
CREATE TABLE appointments (
    appointment_id bigserial NOT NULL PRIMARY KEY,
    fk_user_id int NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    fk_professional_id int REFERENCES professionals(professional_id) ON DELETE SET NULL,
    appointment_text text NOT NULL
);
```
